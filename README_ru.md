# Netter

Netter - это CLI инструмент для быстрого и простого запуска серверов

## Оглавление

* [будущее](#будущее)
* [Функционал](#функционал)
* [Документация](#документация)
* [Установка](#установка)

## Будущее

* Поддержка сложных структур серверов, а также роутингов;
* Поддержка разных видов серверов: HTTP, gRPC, TCP/UDP сокеты;
* Поддержка SSL/TLS

## Функционал

* Создание сервера на веб сокетах (websockets);
* Остановка любого сервера, запущенного через netter

## Документация

Запуск сервера происходит через команду:

``` powershell
netter start
```

Отключение сервера через команду:

```powershell
netter stop
```

[Документация по Route Definition Language](RDL_DOCUMENTATION_ru.md)

### Start

Команда start принимает в себя следующие параметры:

* **--type** : тип сервера: **websocket**, **tcp**, **udp**, **http**, **grpc**:

``` powershell
netter start --websocket
```

* **--host** : адрес сервера:

``` powershell
netter start --websocket --host 127.0.0.1
```

* **--port** : порт сервера:

``` powershell
netter start --websocket --host 127.0.0.1 --port 808
```

* **--protect** : защищать или нет (по умолчанию нет. При осутствии флага тоже нет):

```powershell
netter start --websocket --host 127.0.0.1 --port 8080 --protect
```

Для параметра типа и статус защиты сервера не нужно ничего указать, кроме самого флага.\

### Stop

Команда stop остановит любой запущенный сервер:

```powershell
netter stop
```

#### Как это работает?

> [!NOTE]
> При запуске сервера (netter start) создаётся файл состояния сервера, в котором указываются host, **pid**, port и наличие защиты protect. Этот файл помогает сохранять само по себе наличие запущенного сервера и управлять им в процессе, т.к. каждая новая команда, которую вы используете = запуск кода заново. Запущенный сервер продолжит работу, т.к. он построен на асинхронностях.\
> Завершить работу сервера помогает наличие параметра pid в файле состояния, который указывает на айди процесса сервера в системе. После использования команды stop, netter "убивает" процесс (останавливает)

## Установка

### Windows

Предварительное требование: установленный MSVC. Если у вас его ещё нет, вы можете скачать его с помощью[гайда](https://learn.microsoft.com/ru-ru/cpp/build/vscpp-step-0-installation?view=msvc-170)

> [!WARN]
> Если у вас установлен Qt6 через систему MSYS2 (или другую) под другой компилятор (например, mingw) и вы видите ошибку при запуске `netter client`, вам придётся самостоятельно скачать Qt под MSVC либо перенести (или удалить) ваш текущий Qt и запустить `netter client` заново.

**Rust**:

* Запустите скрипт `install_rust.bat`;

Далее у вас 2 варианта: установить netter напрямую через cargo:

```powershell
cargo install netter
```

или собрать релизную версию проекта из исходников:

* Перейдите в корень проекта;
* Запустите `cargo build --release`;
* (**ОПЦИОНАЛЬНО**): Добавьте путь "path/to/netter/target/release" в PATH.

Далее вы можете пользоваться netter напрямую (если вы не выполнили последний шаг, то только в папке с проектом):

```powershell
netter client
```

или любую другую команду от netter.

**Desktop GUI**:

* Запустите `netter client`;

Далее всё произойдёт само. Начнётся поиск MSVC, Qt6, Cmake, Ninja. Если чего-то из этого (кроме MSVC) не будет найдено, [скрипт](setup_dependencies.py) скачает автоматически.

### Linux

**Rust**:

* Запустите скрипт `install_rust.sh`

Далее у вас 2 варианта: установить netter напрямую через cargo:

```powershell
cargo install netter
```

или собрать релизную версию проекта из исходников:

* Перейдите в корень проекта;
* Запустите `cargo build --release`;
* (**ОПЦИОНАЛЬНО**): Добавьте путь "path/to/netter/target/release" в PATH.

**Desktop GUI**:

* Запустите `netter client`;

Далее всё произойдёт само. Начнётся поиск MSVC, Qt6, Cmake, Ninja. Если чего-то из этого (кроме MSVC) не будет найдено, [скрипт](setup_dependencies.py) скачает автоматически.
